# introduce

이 프로젝트는 24학년도 1학기 김태석 교수님의 "임베디드 소프트웨어 설계" 과목의 개인 프로젝트로 진행하게되었습니다.

RTOS(Real Time Operating System)인 uC/OS를 이용하여 자동차의 속도를 주기적으로 계산하고 계산된 속도와 현재 자동차의 속도가 다를 경우 긴급 제동 신호를 모니터로 내보냅니다.

# calculation

이번 프로젝트에서는 자동화 수동 변속기(디젤엔진) 차량의 속도를 계산합니다.

자동차 구조 특성에 맞춰 rpm을 기준으로 속도가 기어박스에 의해 결정이 되고, 브레이크를 통해 속도가 줄어들게 됩니다.

rpm은 두 단계를 거쳐 결정 됩니다.

1. 가속 페달
> rpm 변수를 올려 간접적으로 속도 값을 올립니다.
> ```cpp
> rpm += (5 - gear) * accel_pad * 3
> ```
> 위와 같이 엑셀 패달 전개 값과 기어 단수에 비례해서 rpm이 상향 조정됩니다.
> ```cpp
> rpm -= (short)round(exp((double)rpm / 1000)) + gear_ratio
> ```
> 반대로 엑셀 패달을 밟고 있지 않을 경우 엔진 브레이크에 의해 rpm이 자동으로 하향 조정됩니다.

2. 기어 박스

> 기어 박스는 rpm을 가속도 값으로 바꿔줍니다. 다음 표를 기준으로 기어비를 설정했습니다.
> |단|기준 rpm|속도(km/h)|기어비(속도/rpm)|
> |-|---------|---------|---------------|
> |1단|2000|15|0.0075|
> |2단|2000|30|0.015|
> |3단|2000|50|0.025|
> |4단|2000|80|0.04|
> |5단|2000|115|0.0575|
> ```cpp
> speed = rpm * gear_ratio[gear]
> ```
> 위와 같이 기어비를 참조해서 rpm을 로 변환합니다.

3. 브레이크

> 브레이크를 통해 속도를 선형으로 감소시킵니다.
> ```cpp
> speed -= break_pad
> ```
> 브레이크 패달의 전개가 클수록 속도도 빠르게 줄어듭니다.

4. 동기화

> 브레이크로 줄어든 속력에 맞춰 rpm을 동기화 해줍니다.
> ```cpp
> rpm = speed / gear_ratio[gear];
> ```

# structure

## data flow

## task flow

# execution

